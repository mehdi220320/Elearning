<main class="admin-main">
  <div class="container">
    <div class="page-header">
      <h1 class="page-title">D√©tails du formateur</h1>
      <div class="actions">
        <a (click)="goBackOrFallback()"  class="btn btn-outline">
          <i class="fas fa-arrow-left"></i>
          Retour
        </a>
<!--        <a href="formateur-edit.html" class="btn btn-primary">-->
<!--          <i class="fas fa-edit"></i>-->
<!--          Modifier-->
<!--        </a>-->
      </div>
    </div>

    <div class="instructor-profile">
      <!-- Profile Card -->
      <div class="profile-card">
        <div class="profile-header">
          <img [src]="getImage(instructor.picture.path)"
               [alt]="(instructor.firstname || '') + ' ' + (instructor.lastname || '')"
               class="profile-avatar">
          <h2 class="profile-name">{{instructor.firstname+" "+instructor.lastname}}</h2>
          <p class="profile-title">{{instructor.speciality}}</p>

          <div class="profile-rating">
            <div class="rating-stars">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
            </div>
            <span class="rating-value">4.7</span>
          </div>
        </div>

        <div class="profile-meta">
          <div class="meta-item">
            <i class="fas fa-envelope"></i>
            <span>{{instructor.email}}</span>
          </div>
          <div class="meta-item">
            <i class="fas fa-phone"></i>
            <span>+216 {{instructor.phone}}</span>
          </div>
          <div class="meta-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>Paris, France</span>
          </div>
          <div class="meta-item">
            <i class="fas fa-user-graduate"></i>
            <span>12 cours enseign√©s</span>
          </div>
        </div>

        <div class="social-links">
          <a *ngIf="instructor.LinkedIn!==''|| instructor.LinkedIn" [href]="instructor.LinkedIn" class="social-link">
            <i class="fab fa-linkedin-in"></i>
          </a>
          <a *ngIf="instructor.Twitter!==''|| instructor.Twitter" [href]="instructor.Twitter" class="social-link">
            <i class="fab fa-twitter"></i>
          </a>
          <a *ngIf="instructor.GitHub!==''|| instructor.GitHub" [href]="instructor.GitHub" class="social-link">
            <i class="fab fa-github"></i>
          </a>
          <a *ngIf="instructor.Site_web!==''|| instructor.Site_web" [href]="instructor.Site_web" class="social-link">
            <i class="fas fa-globe"></i>
          </a>
        </div>

        <div class="profile-actions">
          <a href="#" class="btn btn-primary">
            <i class="fas fa-envelope"></i>
            Envoyer un mail
          </a>
<!--          <a href="#" class="btn btn-danger">-->
<!--            <i class="fas fa-trash-alt"></i>-->
<!--            Supprimer le formateur-->
<!--          </a>-->
        </div>
      </div>

      <!-- Profile Content -->
      <div class="profile-content">
        <section class="bio-section">
          <h2 class="section-title">Biographie</h2>
          <div class="bio-text">
          {{instructor.biographie}}
          </div>
        </section>

        <section class="skills-section">
          <h2 class="section-title">Comp√©tences</h2>
          <div class="skills-container">
            <span *ngFor="let skill of instructor.Competences" class="skill-tag">{{skill}}</span>
          </div>
        </section>

        <section class="courses-section">
          <h2 class="section-title">Cours enseign√©s</h2>
          <div class="courses-grid" *ngIf="courses.length > 0; else noCourses">
            <div *ngFor="let course of courses" class="course-card">
              <div class="course-thumbnail">
                <img [src]="getImage(course.coverImage!.path)" alt="{{ course.title }}">
                <span class="course-category">{{ course.categorie!.name }}</span>
              </div>
              <div class="course-info">
                <h3 class="course-title">{{ course.title }}</h3>
                <p class="course-instructor">
                  Par {{ course.formateur!.firstname }} {{ course.formateur!.lastname }}
                </p>
                <p class="course-description">
                  {{course.description | truncate:94}}
                </p>
                <div class="course-meta">
                  <div class="course-rating">
                    <i class="fas fa-star"></i>
                    <!--            {{ course.rating.toFixed(1) }}-->
                    5
                  </div>
                  <div class="course-price" *ngIf="course.prix > 0">
                    {{ course.prix | currency:'EUR' }}
                  </div>
                  <div class="course-price" *ngIf="course.prix === 0 || !course.prix">
                    Gratuit
                  </div>
                </div>
              </div>
            </div>
          </div>
          <ng-template #noCourses>
            <div class="no-courses-modern">
              <img src="/assets/img_2.png" alt="Aucun cours" class="no-courses-img">
              <h2>Pas encore de cours disponibles</h2>
              <p>Les cours de cet instructeur seront bient√¥t disponibles. Restez √† l'√©coute !</p>
<!--              <button class="btn-refresh" (click)="loadData()">üîÑ Actualiser</button>-->
            </div>
          </ng-template>

        </section>
        <section class="reviews-section">
          <div class="section-header">
            <h2 class="section-title">Avis & √âvaluations</h2>
            <button class="btn btn-primary" (click)="openRatingModal()">
              <i class="fas fa-star"></i>
              Noter ce formateur
            </button>
          </div>

          <div class="rating-summary">
            <div class="overall-rating">
              <div class="rating-value">4.7</div>
              <div class="stars">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
              <div class="rating-count">42 √©valuations</div>
            </div>

            <div class="rating-details">
              <div class="rating-bar" *ngFor="let i of [5,4,3,2,1]; let idx = index">
                <div class="star-count">
                  <span>{{i}}</span>
                  <i class="fas fa-star"></i>
                </div>
                <div class="progress-container">
                  <div class="progress-bar" [style.width]="getRatingPercentage(i) + '%'"></div>
                </div>
                <div class="percentage">{{getRatingPercentage(i)}}%</div>
              </div>
            </div>
          </div>

          <div class="reviews-list">
            <div class="review-card" *ngFor="let review of sampleReviews">
              <div class="reviewer-info">
                <img [src]="review.avatar" alt="Reviewer" class="reviewer-avatar">
                <div class="reviewer-meta">
                  <h4 class="reviewer-name">{{review.name}}</h4>
                  <div class="review-rating">
                    <div class="stars">
                      <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]"
                         [class.filled]="star <= review.rating"></i>
                    </div>
                    <span class="review-date">{{review.date}}</span>
                  </div>
                </div>
              </div>
              <div class="review-content">
                <p>{{review.comment}}</p>
              </div>
              <div class="review-actions">
                <button class="like-btn">
                  <i class="far fa-thumbs-up"></i>
                  <span>Utile ({{review.likes}})</span>
                </button>
                <button class="report-btn">
                  <i class="far fa-flag"></i>
                  <span>Signaler</span>
                </button>
              </div>
            </div>

            <div class="no-reviews" *ngIf="sampleReviews.length === 0">
              <div class="no-reviews-illustration">
                <i class="far fa-comment-dots"></i>
              </div>
              <h3>Aucun avis pour le moment</h3>
              <p>Soyez le premier √† √©valuer ce formateur</p>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
</main>
